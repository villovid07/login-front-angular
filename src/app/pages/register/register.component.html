<mat-toolbar color="primary" class="app-header">
    <div><a href="#" target="_blank" class="positronx">VillovidSoft</a></div>
</mat-toolbar>

<section class="example-section" *ngIf="cargando">
    <mat-progress-bar
        class="example-margin"
        color="primary"
        mode="indeterminate"
        value="50"
        bufferValue="75">
    </mat-progress-bar>
</section>

<div class="login-wrapper" fxLayout="row" fxLayoutAlign="center center">


    <mat-card class="box">
        <form class="example-form" [formGroup]="frmRegister" (ngSubmit)="registrar()">
            <mat-card-header>
                <mat-card-title>Registrar</mat-card-title>
            </mat-card-header>



            <mat-card-content>
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Nombres</mat-label>
                    <input matInput  formControlName="nombre">
                    <mat-error *ngIf="frmRegister.get('nombre').hasError('required')">
                        El nombre es requerido
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Apellidos</mat-label>
                    <input matInput formControlName="apellido">
                    <mat-error *ngIf="frmRegister.get('apellido').hasError('required')">
                        El apellido es requerido
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Nombre de usuario</mat-label>
                    <input matInput  formControlName="username">
                    <mat-error *ngIf="frmRegister.get('username').hasError('required')">
                        El nombre  de usuario es requerido
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Correo electronico</mat-label>
                    <input matInput formControlName="email" >
                    <mat-error *ngIf="frmRegister.get('email').hasError('required')">
                        El email es requerido
                    </mat-error>
                    <mat-error *ngIf="frmRegister.get('email').hasError('pattern')">
                        El valor digitado no es un correo valido
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Genero</mat-label>
                    <mat-select formControlName="genero">
                        <mat-option [value]="" >Seleccione</mat-option>
                        <mat-option [value]="genero.codigo" *ngFor="let genero of lstGeneros">{{genero.descripcion}}
                        </mat-option>
                    </mat-select>
                    <mat-error *ngIf="frmRegister.get('genero').hasError('required')">
                        Se debe seleccionar un genero
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Contraseña</mat-label>
                    <input matInput  [type]="hide ? 'password' : 'text'" formControlName="passwd" (input)="onPasswordInput()" >
                    <span class="show-pwd-icon" href="#" onClick="return false;" matSuffix (click)="hide = !hide"
                        [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                        <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </span>
                    <mat-error *ngIf="frmRegister.get('passwd').hasError('required')">
                        La contraseña es requerida
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Repetir contraseña</mat-label>
                    <input matInput [type]="hide ? 'password' : 'text'" formControlName="repetir_passwd" (input)="onPasswordInput()" >
                    <mat-error *ngIf="frmRegister.get('repetir_passwd').hasError('required')">
                        La contraseña es requerida
                    </mat-error>
                    <mat-error *ngIf="frmRegister.get('repetir_passwd').invalid && !frmRegister.get('repetir_passwd').hasError('required') ">
                        Las contraseñas no coinciden
                    </mat-error>

                    
                </mat-form-field>

            </mat-card-content>

            <button mat-stroked-button color="accent" class="btn-block" [disabled] = "!frmRegister.valid">Register</button>
            <div class="col-sm-12 text-registro">
                <a href="/login" color="primary">Ya tengo cuenta, quiero ingresar</a>
            </div>
        </form>

    </mat-card>

</div>